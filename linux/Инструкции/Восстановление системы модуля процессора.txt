логин: vladimir.lyz
пароль: IntelCoreI27



Восстановка/установка системы на модуль процессора

Общий порядок процесса восстановления системы
1. Подготавливается SD-card с образом восстановления системы. 

2. В рабочий блок КСУ вставляется модуль процессора, систему на котором необходимо восстановить.

3. Перемычки, отвечающие за источник загрузки устанавливаются так, чтобы загрузка выполнялась с SD-card.

4. В модуль процессора вставляется SD-card с образом восстановления системы.

5. В технологических разъём последовательного интерфейса КСУ вставляется технологическое устройство UART-to-RS232. Ответной частью (RS232) технологическое устройство через NULL-модемный кабель подключается к порту RS232 персонального компьютера. 

6. На персональном компьютере запускается программа терминала PYttY, открывается соединение через COM-порт к которому подключено технологическое устройство UART-to-RS232. Соединение устанавливается с указанными параметрами:
- скорость - 115200
- стоп-биты - 1
- чётность - нет

7. Включается питание КСУ. На экране терминала будет отображен процесс загрузки загрузчика системы. Начнётся обратный отсчёт до запуска системы. Пока ведётся отсчёт необходимо нажать на клавиатуре клавишу пробела, процесс загрузки системы будет приостановлен.
8. В окне терминала набрать следующую команду загрузчику: "ll /mnt/mmc". Набирать необходимо только то, что ограничено кавычками. Для выполнения команды нажать клавишу "Enter". Это команда покажет содержимое SD-card. Содержимое будет выглядеть так:

barebox@Phytec phyCORE-i.MX6 Ultra Lite SOM:/ ll /mnt/mmc
-rwxrwxrwx         566370 barebox.bin
-rwxrwxrwx          37141 oftree
-rwxrwxrwx      107040768 root.ubifs
-rwxrwxrwx            733 sd-to-nand
-rwxrwxrwx        6458696 zImage
barebox@Phytec phyCORE-i.MX6 Ultra Lite SOM:/

9. Выполнить сценарий восстановления системы, для этого в терминале набрать команду "sh /mnt/mmc/sd-to-nand" и затем нажать клавишу "Enter". В процессе восстановления системы сценарий запросит подтверждение:
update barebox from /mnt/mmc/barebox.bin using handler nand to nand0.barebox (y/n)?
В ответ на запрос необходимо нажать клавишу "y". Сценарий продолжит восстановление системы.

10. В процессе восстановления будут выполнены следующие действия:
- очистка NAND-flash-памяти модуля процессора (CLEAR ALL NAND ...);
- копирование в загрузчика системы (WRITE BAREBOX ...);
- создание и подготовка разделов файловой системы (FORMAT NAND ... и MAKE PARTITIONS ...);
- копирование ядра системы (COPY KERNEL ...);
- копирование корневой файловой системы (COPY ROOT FILE SYSTEM ...).

11. По окончании процесса восстановления системы сценарий напишет:
FINISH !!!
POWER OFF, EJECT SD-CARD, SWITCH JUMPERS AND REBOOT DEVICE

12. Выключается питание блока КСУ, удаляется SD-card, перемычки, отвечающие за источник загрузки устанавливаются в положение при котором загрузка системы будет выполняться из внутренней памяти модуля процессора.

13. Включается питание блока КСУ. На терминале будет отображён процесс загрузки системы в конце которого будет выдано приглашение:

 ____   _   _ __   __ _____  _____   ____
|  _ \ | | | |\ \ / /|_   _|| ____| / ___|
| |_) || |_| | \ V /   | |  |  _|  | |
|  __/ |  _  |  | |    | |  | |___ | |___
|_|    |_| |_|  |_|    |_|  |_____| \____|

__   __  ___    ____  _   _  ____   _____
\ \ / / / _ \  / ___|| | | ||  _ \ |_   _|
 \ V / | | | || |  _ | | | || |_) |  | |
  | |  | |_| || |_| || |_| ||  _ <   | |
  |_|   \___/  \____| \___/ |_| \_\  |_|


Yogurt Vendor (Phytec Vendor Distribution) BSP-Yocto-Vendor-phyBOARD-Segin-PD17.1.2 phyboard-segin-imx6ul-2 ttymxc0

phyboard-segin-imx6ul-2 login: [   20.261688] fec 2188000.ethernet eth0: Link is Up - 100Mbps/Full - flow control off
[   20.269744] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready

14. Нажать клавишу "Enter". Будет выдано приглашение для входа всистему:
 ____   _   _ __   __ _____  _____   ____
|  _ \ | | | |\ \ / /|_   _|| ____| / ___|
| |_) || |_| | \ V /   | |  |  _|  | |
|  __/ |  _  |  | |    | |  | |___ | |___
|_|    |_| |_|  |_|    |_|  |_____| \____|

__   __  ___    ____  _   _  ____   _____
\ \ / / / _ \  / ___|| | | ||  _ \ |_   _|
 \ V / | | | || |  _ | | | || |_) |  | |
  | |  | |_| || |_| || |_| ||  _ <   | |
  |_|   \___/  \____| \___/ |_| \_\  |_|


Yogurt Vendor (Phytec Vendor Distribution) BSP-Yocto-Vendor-phyBOARD-Segin-PD17.1.2 phyboard-segin-imx6ul-2 ttymxc0

phyboard-segin-imx6ul-2 login:
